# Supabase ì œí’ˆ ì´ë¯¸ì§€ ì—°ë™ ê°€ì´ë“œ

## ê°œìš”
ì´ í”„ë¡œì íŠ¸ëŠ” Supabase Storageë¥¼ í™œìš©í•˜ì—¬ ì œí’ˆ ì¸ë„¤ì¼ê³¼ ìƒì„¸ ì´ë¯¸ì§€ë¥¼ ê´€ë¦¬í•©ë‹ˆë‹¤.

## ğŸš€ ë¹ ë¥¸ ì‹œì‘ ê°€ì´ë“œ

### 1ë‹¨ê³„: ì œí’ˆ ë°ì´í„° ì´ˆê¸°í™”

ì•± í™”ë©´ ìš°ì¸¡ í•˜ë‹¨ì˜ **ê´€ë¦¬ì íŒ¨ë„**ì—ì„œ "1. ì œí’ˆ ë°ì´í„° ì´ˆê¸°í™”" ë²„íŠ¼ì„ í´ë¦­í•˜ì„¸ìš”.
- 8ê°œ ì œí’ˆì˜ ê¸°ë³¸ ì •ë³´ê°€ KV storeì— ì €ì¥ë©ë‹ˆë‹¤.

### 2ë‹¨ê³„: Supabase Storageì— ì´ë¯¸ì§€ ì—…ë¡œë“œ

1. **Supabase ëŒ€ì‹œë³´ë“œ ì ‘ì†**
   - https://supabase.com/dashboard ë¡œê·¸ì¸
   - í˜„ì¬ í”„ë¡œì íŠ¸ ì„ íƒ

2. **Storage ì„¹ì…˜ìœ¼ë¡œ ì´ë™**
   - ì¢Œì¸¡ ë©”ë‰´ì—ì„œ "Storage" í´ë¦­
   - `sinsuru` ë²„í‚· ì„ íƒ

3. **í´ë” ìƒì„± ë° ì´ë¯¸ì§€ ì—…ë¡œë“œ**

#### ğŸ“ í•„ìˆ˜ í´ë” êµ¬ì¡°

ê° ì œí’ˆë³„ë¡œ ì•„ë˜ êµ¬ì¡°ëŒ€ë¡œ í´ë”ë¥¼ ìƒì„±í•˜ê³  ì´ë¯¸ì§€ë¥¼ ì—…ë¡œë“œí•˜ì„¸ìš”:

```
sinsuru/
â””â”€â”€ products/
    â”œâ”€â”€ donkey-milk-soap/              â† "ë‚˜ê·€ìš°ìœ  í´ë Œì§• ê´„ì‚¬ ë¹„ëˆ„"
    â”‚   â”œâ”€â”€ thumbnail.png              (ì œí’ˆ ëª©ë¡ ì¸ë„¤ì¼)
    â”‚   â””â”€â”€ details/                   (ìƒì„¸ í˜ì´ì§€ ë¡¤ë§ ì´ë¯¸ì§€ë“¤)
    â”‚       â”œâ”€â”€ 1.png
    â”‚       â”œâ”€â”€ 2.png
    â”‚       â”œâ”€â”€ 3.png
    â”‚       â””â”€â”€ 4.png
    â”‚
    â”œâ”€â”€ shaving-soap/                  â† "ì„ ë¹„ê°€ë“œ ì‰ì´ë¹™ ê´„ì‚¬ ë¹„ëˆ„"
    â”‚   â”œâ”€â”€ thumbnail.png
    â”‚   â””â”€â”€ details/
    â”‚       â””â”€â”€ ...
    â”‚
    â”œâ”€â”€ almond-scrub-soap/             â† "ì‘ì„ ì•„ëª¬ë“œ ìŠ¤í¬ëŸ½ ê´„ì‚¬ ë¹„ëˆ„"
    â”‚   â”œâ”€â”€ thumbnail.png
    â”‚   â””â”€â”€ details/
    â”‚       â””â”€â”€ ...
    â”‚
    â”œâ”€â”€ hair-removal-soap/             â† "ì—°ë‹¨ ì œëª¨ ê´„ì‚¬ ë¹„ëˆ„"
    â”‚   â”œâ”€â”€ thumbnail.png
    â”‚   â””â”€â”€ details/
    â”‚       â””â”€â”€ ...
    â”‚
    â”œâ”€â”€ soap-set-4/                    â† "ì‹ ìŠ¤ë£¨ ê´„ì‚¬ ë¹„ëˆ„ 4ê°œ ì„¸íŠ¸"
    â”‚   â”œâ”€â”€ thumbnail.png
    â”‚   â””â”€â”€ details/
    â”‚       â””â”€â”€ ...
    â”‚
    â”œâ”€â”€ scrub-towel-set/               â† "ë°”ë”” ìŠ¤í¬ëŸ½ ë¹„ëˆ„&íƒ€ì˜¬ ì„¸íŠ¸"
    â”‚   â”œâ”€â”€ thumbnail.png
    â”‚   â””â”€â”€ details/
    â”‚       â””â”€â”€ ...
    â”‚
    â”œâ”€â”€ face-body-set/                 â† "í˜ì´ìŠ¤&ë°”ë”” ìŠ¤í¬ëŸ½ ì„¸íŠ¸"
    â”‚   â”œâ”€â”€ thumbnail.png
    â”‚   â””â”€â”€ details/
    â”‚       â””â”€â”€ ...
    â”‚
    â””â”€â”€ cleansing-towel-set/           â† "í˜ì´ìŠ¤ í´ë Œì§• ë¹„ëˆ„&íƒ€ì˜¬ ì„¸íŠ¸"
        â”œâ”€â”€ thumbnail.png
        â””â”€â”€ details/
            â””â”€â”€ ...
```

#### ğŸ–¼ï¸ ì—…ë¡œë“œ ë°©ë²• (ì˜ˆì‹œ: "ë‚˜ê·€ìš°ìœ  í´ë Œì§• ê´„ì‚¬ ë¹„ëˆ„")

1. **í´ë” ìƒì„±**
   - Supabase Storageì—ì„œ `products` í´ë”ë¡œ ì´ë™
   - "Create folder" í´ë¦­ â†’ `donkey-milk-soap` ì…ë ¥
   - `donkey-milk-soap` í´ë” ì•ˆì— ë“¤ì–´ê°€ì„œ "Create folder" â†’ `details` ì…ë ¥

2. **ì¸ë„¤ì¼ ì—…ë¡œë“œ**
   - `donkey-milk-soap` í´ë”ì—ì„œ "Upload file" í´ë¦­
   - ì¸ë„¤ì¼ ì´ë¯¸ì§€ë¥¼ ì„ íƒí•˜ê³  íŒŒì¼ëª…ì„ ì •í™•íˆ `thumbnail.png`ë¡œ ì—…ë¡œë“œ

3. **ìƒì„¸ ì´ë¯¸ì§€ ì—…ë¡œë“œ**
   - `donkey-milk-soap/details` í´ë”ë¡œ ì´ë™
   - ìƒì„¸ í˜ì´ì§€ì— í‘œì‹œí•  ì´ë¯¸ì§€ë“¤ì„ `1.png`, `2.png`, `3.png`, `4.png` ë“±ì˜ ì´ë¦„ìœ¼ë¡œ ì—…ë¡œë“œ
   - íŒŒì¼ëª… ìˆœì„œëŒ€ë¡œ ë¡¤ë§ ì´ë¯¸ì§€ì— í‘œì‹œë©ë‹ˆë‹¤

4. **ë‚˜ë¨¸ì§€ ì œí’ˆ ë°˜ë³µ**
   - ìœ„ ê³¼ì •ì„ ë‹¤ë¥¸ 7ê°œ ì œí’ˆì—ë„ ë™ì¼í•˜ê²Œ ë°˜ë³µ

## Supabase Storage êµ¬ì¡°

### ë²„í‚·: `sinsuru`
ì œí’ˆ ì´ë¯¸ì§€ëŠ” ë‹¤ìŒê³¼ ê°™ì€ í´ë” êµ¬ì¡°ë¡œ ì €ì¥ë©ë‹ˆë‹¤:

```
sinsuru/
â”œâ”€â”€ products/
â”‚   â”œâ”€â”€ donkey-milk-soap/
â”‚   â”‚   â”œâ”€â”€ thumbnail.png          # ì œí’ˆ ì¸ë„¤ì¼
â”‚   â”‚   â””â”€â”€ details/               # ìƒì„¸ í˜ì´ì§€ ë¡¤ë§ ì´ë¯¸ì§€
â”‚   â”‚       â”œâ”€â”€ 1.png
â”‚   â”‚       â”œâ”€â”€ 2.png
â”‚   â”‚       â”œâ”€â”€ 3.png
â”‚   â”‚       â””â”€â”€ 4.png
â”‚   â”œâ”€â”€ shaving-soap/
â”‚   â”‚   â”œâ”€â”€ thumbnail.png
â”‚   â”‚   â””â”€â”€ details/
â”‚   â”‚       â””â”€â”€ ...
â”‚   â””â”€â”€ ... (ë‹¤ë¥¸ ì œí’ˆë“¤)
```

## ì„¤ì • ë‹¨ê³„

### 1. ì œí’ˆ ë°ì´í„° ì´ˆê¸°í™”

ï¿½ï¿½ë¼ìš°ì € ì½˜ì†”ì—ì„œ ë‹¤ìŒ ì½”ë“œë¥¼ ì‹¤í–‰í•˜ì—¬ ì œí’ˆ ë°ì´í„°ë¥¼ KV storeì— ì €ì¥í•©ë‹ˆë‹¤:

```javascript
import { initializeProducts } from './utils/initProducts';
await initializeProducts();
```

### 2. Supabase Storageì— ì´ë¯¸ì§€ ì—…ë¡œë“œ

Supabase ëŒ€ì‹œë³´ë“œì—ì„œ:

1. Storage ì„¹ì…˜ìœ¼ë¡œ ì´ë™
2. `sinsuru` ë²„í‚· ì„ íƒ
3. ì œí’ˆë³„ë¡œ ë‹¤ìŒê³¼ ê°™ì´ ì—…ë¡œë“œ:
   - `products/{product-id}/thumbnail.png` - ì œí’ˆ ì¸ë„¤ì¼ ì´ë¯¸ì§€
   - `products/{product-id}/details/1.png, 2.png, ...` - ìƒì„¸ í˜ì´ì§€ ë¡¤ë§ ì´ë¯¸ì§€

#### ì œí’ˆ ID ëª©ë¡:
- `donkey-milk-soap` - ë‚˜ê·€ìš°ìœ  í´ë Œì§• ê´„ì‚¬ ë¹„ëˆ„
- `shaving-soap` - ì„ ë¹„ê°€ë“œ ì‰ì´ë¹™ ê´„ì‚¬ ë¹„ëˆ„
- `almond-scrub-soap` - ì‘ì„ ì•„ëª¬ë“œ ìŠ¤í¬ëŸ½ ê´„ì‚¬ ë¹„ëˆ„
- `hair-removal-soap` - ì—°ë‹¨ ì œëª¨ ê´„ì‚¬ ë¹„ëˆ„
- `soap-set-4` - ì‹ ìŠ¤ë£¨ ê´„ì‚¬ ë¹„ëˆ„ 4ê°œ ì„¸íŠ¸
- `scrub-towel-set` - ë°”ë”” ìŠ¤í¬ëŸ½ ë¹„ëˆ„&íƒ€ì˜¬ ì„¸íŠ¸
- `face-body-set` - í˜ì´ìŠ¤&ë°”ë”” ìŠ¤í¬ëŸ½ ì„¸íŠ¸
- `cleansing-towel-set` - í˜ì´ìŠ¤ í´ë Œì§• ë¹„ëˆ„&íƒ€ì˜¬ ì„¸íŠ¸

### 3. ì´ë¯¸ì§€ ì—…ë¡œë“œ ì˜ˆì‹œ

ì˜ˆë¥¼ ë“¤ì–´, "ë‚˜ê·€ìš°ìœ  í´ë Œì§• ê´„ì‚¬ ë¹„ëˆ„"ì˜ ì´ë¯¸ì§€ë¥¼ ì—…ë¡œë“œí•˜ë ¤ë©´:

1. ì¸ë„¤ì¼: `products/donkey-milk-soap/thumbnail.png`
2. ìƒì„¸ ì´ë¯¸ì§€:
   - `products/donkey-milk-soap/details/1.png`
   - `products/donkey-milk-soap/details/2.png`
   - `products/donkey-milk-soap/details/3.png`
   - `products/donkey-milk-soap/details/4.png`

## ì‘ë™ ë°©ì‹

### ì œí’ˆ ëª©ë¡ í˜ì´ì§€ (BodySoap.tsx)
- í˜ì´ì§€ ë¡œë“œ ì‹œ ì„œë²„ì—ì„œ ëª¨ë“  ì œí’ˆ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤
- ê° ì œí’ˆì˜ ì¸ë„¤ì¼ ì´ë¯¸ì§€ëŠ” Supabase Storageì—ì„œ ìë™ìœ¼ë¡œ ë¡œë“œë©ë‹ˆë‹¤
- ì´ë¯¸ì§€ê°€ ì—†ëŠ” ê²½ìš° ê¸°ë³¸ ì´ë¯¸ì§€(figma asset)ê°€ í‘œì‹œë©ë‹ˆë‹¤

### ì œí’ˆ ìƒì„¸ í˜ì´ì§€ (ProductDetail.tsx)
- ì œí’ˆ í´ë¦­ ì‹œ í•´ë‹¹ ì œí’ˆì˜ ìƒì„¸ ì •ë³´ë¥¼ ì„œë²„ì—ì„œ ê°€ì ¸ì˜µë‹ˆë‹¤
- ì¸ë„¤ì¼ ì´ë¯¸ì§€ì™€ ìƒì„¸ ë¡¤ë§ ì´ë¯¸ì§€ë¥¼ Supabase Storageì—ì„œ ë¡œë“œí•©ë‹ˆë‹¤
- ì´ë¯¸ì§€ê°€ ì—†ëŠ” ê²½ìš° ê¸°ë³¸ ì´ë¯¸ì§€ê°€ í‘œì‹œë©ë‹ˆë‹¤

## API ì—”ë“œí¬ì¸íŠ¸

### GET /make-server-cb50e858/products
ëª¨ë“  ì œí’ˆ ëª©ë¡ ì¡°íšŒ

### GET /make-server-cb50e858/products/:id
íŠ¹ì • ì œí’ˆ ìƒì„¸ ì •ë³´ ì¡°íšŒ

### POST /make-server-cb50e858/products
ì œí’ˆ ìƒì„±/ì—…ë°ì´íŠ¸

### DELETE /make-server-cb50e858/products/:id
ì œí’ˆ ì‚­ì œ

## ì£¼ì˜ì‚¬í•­

1. Supabase Storageì˜ `sinsuru` ë²„í‚·ì´ ì´ë¯¸ ìƒì„±ë˜ì–´ ìˆì–´ì•¼ í•©ë‹ˆë‹¤
2. ì´ë¯¸ì§€ëŠ” public ì ‘ê·¼ì´ ê°€ëŠ¥í•˜ë„ë¡ ì„¤ì •í•˜ê±°ë‚˜, signed URLì„ í†µí•´ ì ‘ê·¼í•©ë‹ˆë‹¤
3. í˜„ì¬ëŠ” signed URL (1ì‹œê°„ ìœ íš¨)ì„ ì‚¬ìš©í•˜ì—¬ ì´ë¯¸ì§€ë¥¼ ì œê³µí•©ë‹ˆë‹¤
4. ì´ë¯¸ì§€ íŒŒì¼ëª…ì€ ì •í™•íˆ ì¼ì¹˜í•´ì•¼ í•©ë‹ˆë‹¤ (ëŒ€ì†Œë¬¸ì êµ¬ë¶„)

## í´ë°±(Fallback) ì‹œìŠ¤í…œ

Supabase Storageì— ì´ë¯¸ì§€ê°€ ì—†ì–´ë„ ì•±ì€ ì •ìƒ ì‘ë™í•©ë‹ˆë‹¤:
- ê¸°ì¡´ Figma asset ì´ë¯¸ì§€ê°€ ê¸°ë³¸ê°’ìœ¼ë¡œ í‘œì‹œë©ë‹ˆë‹¤
- ì¶”í›„ Supabaseì— ì´ë¯¸ì§€ë¥¼ ì—…ë¡œë“œí•˜ë©´ ìë™ìœ¼ë¡œ ì „í™˜ë©ë‹ˆë‹¤